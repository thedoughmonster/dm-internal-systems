{
  "kind": "directive_task",
  "schema_version": "1.0",
  "meta": {
    "id": "3fe6d422-141b-4fe5-b38f-eb6f146b673f",
    "title": "Migrate directives shell components to CSS modules",
    "status": "todo",
    "priority": "high",
    "session_priority": "high",
    "owner": "operator",
    "assignee": "executor",
    "bucket": "todo",
    "created": "2026-02-12T21:24:04.000Z",
    "updated": "2026-02-12T22:22:53.000Z",
    "tags": [
      "css",
      "directives",
      "ui",
      "migration"
    ],
    "effort": "medium",
    "depends_on": [
      "c9cdc3ba-e213-4388-b7a8-35acf89c75ff"
    ],
    "blocked_by": [],
    "related": [],
    "summary": "Move directives shell component class strings into co-located CSS modules using semantic tokens.",
    "execution_model": "gpt-5.2-codex",
    "thinking_level": "medium",
    "result": {
      "summary": "Migrated directives shell components to co-located CSS modules and removed raw className string literals from listed TSX files.",
      "validation": "pass: ! rg -n \"className\\s*=\\s*\\\"|className\\s*=\\s*'|className\\s*=\\s*\\{\\s*\\\"|className\\s*=\\s*\\{\\s*'\" apps/web/app/directives/composites/DirectivesView.tsx apps/web/app/directives/composites/DirectivesFiltersPanel.tsx apps/web/app/directives/composites/RefreshButton.tsx\npass: npm --prefix apps/web run typecheck\npass-with-warnings: npm --prefix apps/web run lint\nlint warnings (pre-existing in this task scope):\n- apps/web/app/directives/composites/TagsInput.tsx:124 react-hooks/exhaustive-deps (2 warnings)\nmanual visual checklist:\n- directives listing shell: not run (no browser-driven manual verification performed in this session)\n- filter interactions: not run (no browser-driven manual verification performed in this session)\n",
      "updated": "20260212T224246Z"
    }
  },
  "task": {
    "objective": "Convert directives shell components to component-scoped CSS modules and remove raw class literals from JSX.",
    "constraints": [
      "Do not change data fetching, actions, or component props.",
      "Use semantic tokens for color/spacing/radius/shadow values.",
      "Do not use raw utility class strings in JSX.",
      "Manual visual checklist evidence is required in task result."
    ],
    "allowed_files": [
      {
        "path": "`apps/web/app/directives/composites/DirectivesView.tsx`",
        "access": "edit"
      },
      {
        "path": "`apps/web/app/directives/composites/DirectivesView.module.css` (create)",
        "access": "edit"
      },
      {
        "path": "`apps/web/app/directives/composites/DirectivesFiltersPanel.tsx`",
        "access": "edit"
      },
      {
        "path": "`apps/web/app/directives/composites/DirectivesFiltersPanel.module.css` (create)",
        "access": "edit"
      },
      {
        "path": "`apps/web/app/directives/composites/RefreshButton.tsx`",
        "access": "edit"
      },
      {
        "path": "`apps/web/app/directives/composites/RefreshButton.module.css` (create)",
        "access": "edit"
      }
    ],
    "steps": [
      {
        "id": "step_1",
        "instruction": "Create module CSS files for the listed shell components and migrate visual styles from JSX class strings into module selectors.",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_2",
        "instruction": "Update each listed TSX file to import its co-located module and replace raw class literals with style token references.",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_3",
        "instruction": "Ensure module CSS values for color/spacing/radius/shadow use semantic tokens.",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_4",
        "instruction": "Validate that no raw `className` string literals remain in listed TSX files.",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_5",
        "instruction": "Record manual visual checklist evidence for directives listing shell and filter interactions.",
        "files": [],
        "artifact": ""
      }
    ],
    "validation": {
      "commands": [
        "! rg -n \"className\\s*=\\s*\\\"|className\\s*=\\s*'|className\\s*=\\s*\\{\\s*\\\"|className\\s*=\\s*\\{\\s*'\" apps/web/app/directives/composites/DirectivesView.tsx apps/web/app/directives/composites/DirectivesFiltersPanel.tsx apps/web/app/directives/composites/RefreshButton.tsx",
        "npm --prefix apps/web run typecheck",
        "npm --prefix apps/web run lint"
      ]
    },
    "expected_output": [
      "Listed directives shell components use co-located CSS modules.",
      "Listed TSX files contain no raw `className` string literals."
    ],
    "stop_conditions": [
      "Stop and request direction if behavior parity requires cross-component selector dependencies not representable in module scope."
    ],
    "notes": []
  }
}
