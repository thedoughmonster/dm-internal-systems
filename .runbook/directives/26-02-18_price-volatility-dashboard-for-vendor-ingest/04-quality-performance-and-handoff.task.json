{
  "kind": "directive_task",
  "schema_version": "1.0",
  "meta": {
    "title": "Quality, sparse-data robustness, and performance gates",
    "summary": "Define validation gates for sparse/incomplete data handling, performance expectations, and completion evidence.",
    "status": "todo",
    "created": "2026-02-18T13:36:36.765Z",
    "updated": "2026-02-18T13:36:37.409Z",
    "id": "5a1c0c7c-2a0d-434d-9b81-97a8ee70e742",
    "priority": "medium",
    "session_priority": "medium",
    "owner": "operator",
    "assignee": "executor",
    "bucket": "todo",
    "tags": "authoring",
    "effort": "small",
    "depends_on": [],
    "blocked_by": [],
    "related": [],
    "execution_model": "gpt-5.3-codex",
    "thinking_level": "medium"
  },
  "task": {
    "objective": "Complete quality gates for sparse/incomplete data handling and performance expectations, then prepare executor completion evidence for directive closeout.",
    "constraints": [
      "Validation evidence must be reproducible from repository commands.",
      "Performance checks should focus on default 90-day window behavior and avoid synthetic overfitting.",
      "Do not claim pass status without explicit command outcomes.",
      "Task may update other task files for validation/result evidence if needed."
    ],
    "allowed_files": [
      {
        "path": "apps/web/app/vendors/ingest/price-changes/page.tsx",
        "access": "edit",
        "note": "Default window behavior and fallback handling evidence."
      },
      {
        "path": "apps/web/app/vendors/ingest/price-changes/composites/PriceChangesView.tsx",
        "access": "edit",
        "note": "Sparse/error state and rendering performance tuning."
      },
      {
        "path": "supabase/functions/vendor_price_change_series_read_v1/index.ts",
        "access": "edit",
        "note": "Backend response performance and robustness improvements."
      },
      {
        "path": ".runbook/directives/26-02-18_price-volatility-dashboard-for-vendor-ingest/*.task.json",
        "access": "edit",
        "note": "Attach task-level validation/result evidence as work completes."
      }
    ],
    "steps": [
      {
        "id": "step_1",
        "instruction": "Verify sparse and incomplete datasets render safely with informative UI states.",
        "files": [
          "apps/web/app/vendors/ingest/price-changes/composites/PriceChangesView.tsx"
        ],
        "artifact": "No crashes or misleading charts for low-observation scenarios."
      },
      {
        "id": "step_2",
        "instruction": "Run quality gates and targeted checks for default-window performance characteristics.",
        "files": [
          "apps/web/app/vendors/ingest/price-changes/page.tsx",
          "supabase/functions/vendor_price_change_series_read_v1/index.ts"
        ],
        "artifact": "Validation logs include lint/typecheck and selected performance evidence."
      },
      {
        "id": "step_3",
        "instruction": "Capture concise completion evidence and ensure directive artifacts are ready for closeout.",
        "files": [
          ".runbook/directives/26-02-18_price-volatility-dashboard-for-vendor-ingest/*.task.json"
        ],
        "artifact": "Task results and validation status can be audited without re-deriving context."
      }
    ],
    "validation": {
      "commands": [
        "npm --prefix apps/web run lint",
        "npm --prefix apps/web run typecheck",
        "rg -n \"90|default|sparse|incomplete|error\" apps/web/app/vendors/ingest/price-changes/page.tsx apps/web/app/vendors/ingest/price-changes/composites/PriceChangesView.tsx",
        "runbook validate --session 26-02-18_price-volatility-dashboard-for-vendor-ingest"
      ]
    },
    "expected_output": [
      "Sparse/incomplete data behavior is explicit, user-safe, and verified.",
      "Default window performance is acceptable for directive intent.",
      "Directive artifacts are validation-clean and ready for executor closeout workflow."
    ],
    "stop_conditions": [
      "Stop and ask operator if quality/performance failures are rooted in unrelated platform-wide issues."
    ],
    "notes": [
      "Treat this as the final integration gate before implementation closeout."
    ]
  }
}
