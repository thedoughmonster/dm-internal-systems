{
  "kind": "directive_task",
  "schema_version": "1.0",
  "meta": {
    "title": "Price tracking overview UI with charts",
    "summary": "Specify overview UI behavior for per-vendor item price-over-time charts and sortable/filterable list surfaces.",
    "status": "done",
    "created": "2026-02-18T13:36:36.657Z",
    "updated": "2026-02-18T15:02:10.303Z",
    "id": "5c5ae376-0d34-45be-bdf3-3a3a441d5af2",
    "priority": "medium",
    "session_priority": "medium",
    "owner": "operator",
    "assignee": "executor",
    "bucket": "todo",
    "tags": [],
    "effort": "medium",
    "depends_on": [],
    "blocked_by": [],
    "related": [],
    "execution_model": "gpt-5.3-codex",
    "thinking_level": "medium",
    "result": {
      "summary": "Delivered overview UI with 90-day default route behavior, ranking/filter controls, and resilient sparse/empty/error states.",
      "validation": "PASS: rg default-window and UI-state checks; PASS: npm --prefix apps/web run lint; PASS: npm --prefix apps/web run typecheck.",
      "updated": "2026-02-18T15:02:10Z"
    }
  },
  "task": {
    "objective": "Deliver the price tracking overview UI showing per-vendor item price-over-time charts and a sortable/filterable list aligned to the new volatility metrics.",
    "constraints": [
      "Route behavior must remain compatible with existing `/vendors/ingest/price-changes` navigation.",
      "Default UI state should load a 90-day window with sensible fallback messaging when data is absent.",
      "Chart rendering must degrade gracefully for sparse series and missing points.",
      "Do not introduce breaking changes to shared UI primitives."
    ],
    "allowed_files": [
      {
        "path": "apps/web/app/vendors/ingest/price-changes/page.tsx",
        "access": "edit",
        "note": "Route-level data loading and defaults."
      },
      {
        "path": "apps/web/app/vendors/ingest/price-changes/composites/PriceChangesView.tsx",
        "access": "edit",
        "note": "Primary overview UI surface, chart/list controls, and interactions."
      },
      {
        "path": "apps/web/app/vendors/ingest/price-changes/lib/types.ts",
        "access": "edit",
        "note": "UI-facing typed models for chart/list rows and selection state."
      }
    ],
    "steps": [
      {
        "id": "step_1",
        "instruction": "Apply 90-day default route/query behavior and wire initial data fetch.",
        "files": [
          "apps/web/app/vendors/ingest/price-changes/page.tsx"
        ],
        "artifact": "Page loads with a valid default window and no manual input required."
      },
      {
        "id": "step_2",
        "instruction": "Render overview charts/list with sorting and filter controls tied to metric options.",
        "files": [
          "apps/web/app/vendors/ingest/price-changes/composites/PriceChangesView.tsx"
        ],
        "artifact": "Interactive overview supporting ranking/filter workflows."
      },
      {
        "id": "step_3",
        "instruction": "Add empty/sparse/error states for incomplete vendor price history.",
        "files": [
          "apps/web/app/vendors/ingest/price-changes/composites/PriceChangesView.tsx"
        ],
        "artifact": "Resilient UI behavior across no-data and partial-data conditions."
      }
    ],
    "validation": {
      "commands": [
        "rg -n \"90|days|empty|no data|sparse|volatility|sort|filter\" apps/web/app/vendors/ingest/price-changes/page.tsx apps/web/app/vendors/ingest/price-changes/composites/PriceChangesView.tsx",
        "npm --prefix apps/web run lint",
        "npm --prefix apps/web run typecheck"
      ]
    },
    "expected_output": [
      "Overview screen displays per-vendor item time-series and ranking controls.",
      "Default 90-day behavior is visible and stable.",
      "UI handles sparse/incomplete datasets without rendering failures."
    ],
    "stop_conditions": [
      "Stop and ask operator if required visual changes imply broader design-system updates outside directive scope."
    ],
    "notes": [
      "Prefer existing table/card/chart primitives already used in vendors ingest surfaces."
    ]
  }
}
