{
  "kind": "directive_task",
  "schema_version": "1.0",
  "meta": {
    "id": "b5584650-9011-407b-a72b-82b238f53259",
    "title": "Migrate directives select and relation controls to CSS modules",
    "status": "todo",
    "priority": "high",
    "session_priority": "high",
    "owner": "operator",
    "assignee": "executor",
    "bucket": "todo",
    "created": "2026-02-12T21:24:04.000Z",
    "updated": "2026-02-12T22:22:53.000Z",
    "tags": [
      "css",
      "directives",
      "ui",
      "migration"
    ],
    "effort": "medium",
    "depends_on": [
      "4aeaa528-b4ba-4f6d-a459-3139542d2c1c"
    ],
    "blocked_by": [],
    "related": [],
    "summary": "Move select and relation control class strings into co-located CSS modules using semantic tokens.",
    "execution_model": "gpt-5.2-codex",
    "thinking_level": "medium",
    "result": {
      "summary": "Migrated listed select/relation controls to co-located CSS modules and removed raw className string literals from the five TSX targets.",
      "validation": "pass: ! rg -n \"className\\s*=\\s*\\\"|className\\s*=\\s*'|className\\s*=\\s*\\{\\s*\\\"|className\\s*=\\s*\\{\\s*'\" apps/web/app/directives/composites/FilterSelect.tsx apps/web/app/directives/composites/MultiSelectDropdown.tsx apps/web/app/directives/composites/RelationsMultiSelect.tsx apps/web/app/directives/composites/SessionSelect.tsx apps/web/app/directives/composites/TagsMultiSelect.tsx\npass: npm --prefix apps/web run typecheck\npass-with-warnings: npm --prefix apps/web run lint\nlint warnings (pre-existing in this task scope):\n- apps/web/app/directives/composites/TagsInput.tsx:124 react-hooks/exhaustive-deps (2 warnings)\nmanual visual checklist:\n- select controls styling/interaction: not run (no browser-driven manual verification performed in this session)\n- relation controls styling/interaction: not run (no browser-driven manual verification performed in this session)\nsnapshot evidence:\n- not captured (no elevated-uncertainty interaction snapshot run in this session)\n",
      "updated": "20260212T225305Z"
    }
  },
  "task": {
    "objective": "Convert directives select-oriented controls to CSS modules and remove raw class literals from JSX.",
    "constraints": [
      "Preserve current control behavior and keyboard interaction.",
      "Use semantic tokens for color/spacing/radius/shadow values.",
      "Do not use raw utility class strings in JSX.",
      "Manual visual checklist evidence is required; snapshots are required if interaction visuals appear unstable."
    ],
    "allowed_files": [
      {
        "path": "`apps/web/app/directives/composites/FilterSelect.tsx`",
        "access": "edit"
      },
      {
        "path": "`apps/web/app/directives/composites/FilterSelect.module.css` (create)",
        "access": "edit"
      },
      {
        "path": "`apps/web/app/directives/composites/MultiSelectDropdown.tsx`",
        "access": "edit"
      },
      {
        "path": "`apps/web/app/directives/composites/MultiSelectDropdown.module.css` (create)",
        "access": "edit"
      },
      {
        "path": "`apps/web/app/directives/composites/RelationsMultiSelect.tsx`",
        "access": "edit"
      },
      {
        "path": "`apps/web/app/directives/composites/RelationsMultiSelect.module.css` (create)",
        "access": "edit"
      },
      {
        "path": "`apps/web/app/directives/composites/SessionSelect.tsx`",
        "access": "edit"
      },
      {
        "path": "`apps/web/app/directives/composites/SessionSelect.module.css` (create)",
        "access": "edit"
      },
      {
        "path": "`apps/web/app/directives/composites/TagsMultiSelect.tsx`",
        "access": "edit"
      },
      {
        "path": "`apps/web/app/directives/composites/TagsMultiSelect.module.css` (create)",
        "access": "edit"
      }
    ],
    "steps": [
      {
        "id": "step_1",
        "instruction": "Create module CSS files for all listed control components and migrate visual styles from JSX class strings into module selectors.",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_2",
        "instruction": "Update listed TSX files to import co-located modules and replace raw class literals with style token references.",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_3",
        "instruction": "Preserve existing conditional styling using style token composition (`styles.*`) rather than string literals.",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_4",
        "instruction": "Ensure module CSS values for color/spacing/radius/shadow use semantic tokens.",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_5",
        "instruction": "Validate that no raw `className` string literals remain in listed TSX files.",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_6",
        "instruction": "Record manual visual checklist evidence and snapshot evidence when elevated risk is present.",
        "files": [],
        "artifact": ""
      }
    ],
    "validation": {
      "commands": [
        "! rg -n \"className\\s*=\\s*\\\"|className\\s*=\\s*'|className\\s*=\\s*\\{\\s*\\\"|className\\s*=\\s*\\{\\s*'\" apps/web/app/directives/composites/FilterSelect.tsx apps/web/app/directives/composites/MultiSelectDropdown.tsx apps/web/app/directives/composites/RelationsMultiSelect.tsx apps/web/app/directives/composites/SessionSelect.tsx apps/web/app/directives/composites/TagsMultiSelect.tsx",
        "npm --prefix apps/web run typecheck",
        "npm --prefix apps/web run lint"
      ]
    },
    "expected_output": [
      "All listed select and relation controls use co-located CSS modules.",
      "Listed TSX files contain no raw `className` string literals."
    ],
    "stop_conditions": [
      "Stop and request direction if third-party control constraints require styling hooks that cannot be expressed without exception handling."
    ],
    "notes": []
  }
}
