{
  "kind": "directive_task",
  "schema_version": "1.0",
  "meta": {
    "id": "7a0cee1d-3e4d-4608-bef3-b1dd84549560",
    "title": "Enforce executor commit policy per task and collection",
    "status": "archived",
    "priority": "high",
    "session_priority": "high",
    "owner": "operator",
    "assignee": "executor",
    "bucket": "archived",
    "created": "2026-02-11T13:36:38.000Z",
    "updated": "2026-02-11T16:33:04.000Z",
    "tags": [
      "executor",
      "commits",
      "collections",
      "compliance"
    ],
    "effort": "medium",
    "depends_on": [
      "1bf5dc5e-0801-4a71-a653-20ba25789621",
      "92e5f800-7b62-45cc-b43d-c1249ab483a2"
    ],
    "blocked_by": [],
    "related": [
      "e174edff-b9f1-400e-82cf-3a6b12e5c068"
    ],
    "summary": "Update executor and shared rules so task completion and collection completion require explicit commit checkpoints.",
    "execution_model": "gpt-5.2-codex",
    "thinking_level": "high",
    "result": "Completed. Commit checkpoint rules now enforce explicit commit_policy modes, stop behavior for missing checkpoints, and fail-closed enforcement language for unresolved checkpoint violations."
  },
  "task": {
    "objective": "Document mandatory executor commit checkpoints for task-level and collection-level completion.",
    "constraints": [
      "Commit requirements must be unambiguous and auditable.",
      "Keep operator override and approval semantics intact.",
      "Do not require interactive git tooling."
    ],
    "allowed_files": [
      {
        "path": "\\'AGENTS.md\\' (edit)",
        "access": "edit"
      },
      {
        "path": "\\'docs/agent-rules/executor/execution-and-compliance.md\\' (edit)",
        "access": "edit"
      },
      {
        "path": "\\'docs/agent-rules/executor/stop-and-reporting.md\\' (edit)",
        "access": "edit"
      },
      {
        "path": "\\'docs/agent-rules/shared/critical-enforcement.md\\' (edit)",
        "access": "edit"
      }
    ],
    "steps": [
      {
        "id": "step_1",
        "instruction": "In \\'docs/agent-rules/executor/execution-and-compliance.md\\', add required commit checkpoint after each completed task.",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_2",
        "instruction": "In \\'docs/agent-rules/executor/execution-and-compliance.md\\', add required collection completion commit checkpoint using collection metadata fields.",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_3",
        "instruction": "In \\'docs/agent-rules/executor/stop-and-reporting.md\\', add stop behavior when commit checkpoint cannot be completed.",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_4",
        "instruction": "In \\'AGENTS.md\\', update commit policy language to reflect per-task and per-collection requirements for directive execution.",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_5",
        "instruction": "In \\'docs/agent-rules/shared/critical-enforcement.md\\', add fail-closed enforcement for missing commit checkpoints.",
        "files": [],
        "artifact": ""
      }
    ],
    "validation": {
      "commands": [
        "rg -n \"per-task commit|collection completion commit|commit checkpoint|fail-closed\" AGENTS.md docs/agent-rules/executor/execution-and-compliance.md docs/agent-rules/executor/stop-and-reporting.md docs/agent-rules/shared/critical-enforcement.md"
      ]
    },
    "expected_output": [
      "Executor rules require and enforce commit checkpoints at task and collection boundaries."
    ],
    "stop_conditions": [
      "Stop and ask operator if repository commit strategy must remain end-of-feature only for any directive class."
    ],
    "notes": []
  }
}
