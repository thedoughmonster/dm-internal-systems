{
  "kind": "directive_task",
  "schema_version": "1.0",
  "meta": {
    "title": "lint structure and types",
    "status": "archived",
    "owner": "architect",
    "assignee": "executor",
    "priority": "medium",
    "session_priority": "medium",
    "bucket": "archived",
    "auto_run": false,
    "tags": [
      "lint",
      "types",
      "structure"
    ],
    "created": "2026-02-03T22:08:26.000Z",
    "updated": "2026-02-11T10:29:39.000Z",
    "result": "Added route boundary linting, component import restrictions, TypeScript options, and moved shared types into apps/web/lib/types.",
    "summary": "Enforce structural lint boundaries, consolidate shared types, and add TypeScript correctness options in apps/web.",
    "execution_model": "gpt-5.2-codex",
    "thinking_level": "medium",
    "id": "57485e30-130d-48c8-8ee6-2a4010a14900"
  },
  "task": {
    "objective": "- Enforce component paradigm and route boundary rules via lint in apps/web.\n- Consolidate shared types under apps/web/lib/types and remove apps/web/types.\n- Add low risk TypeScript correctness options.",
    "constraints": [
      "Scope: apps/web only.",
      "No em dash characters in generated writing.",
      "Shared types must live under apps/web/lib/types.",
      "Route scoped types remain in apps/web/app/<route>/lib/types.ts.",
      "Do not call Supabase REST endpoints directly from UI code."
    ],
    "allowed_files": [
      {
        "path": "apps/web/eslint.config.mjs",
        "access": "edit"
      },
      {
        "path": "apps/web/tsconfig.json",
        "access": "edit"
      },
      {
        "path": "apps/web/components/**",
        "access": "edit"
      },
      {
        "path": "apps/web/app/**",
        "access": "edit"
      },
      {
        "path": "apps/web/lib/**",
        "access": "edit"
      },
      {
        "path": "apps/web/types/**",
        "access": "edit"
      },
      {
        "path": "apps/web/eslint.config.mjs",
        "access": "edit"
      },
      {
        "path": "apps/web/tsconfig.json",
        "access": "edit"
      },
      {
        "path": "apps/web/lib/eslint/route-boundaries.mjs",
        "access": "edit"
      },
      {
        "path": "apps/web/lib/types/**",
        "access": "edit"
      },
      {
        "path": "apps/web/app/**",
        "access": "edit"
      },
      {
        "path": "apps/web/types/** once empty",
        "access": "edit"
      }
    ],
    "steps": [
      {
        "id": "step_1",
        "instruction": "Baseline review of apps/web/eslint.config.mjs and apps/web/tsconfig.json.",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_2",
        "instruction": "Add TypeScript options to apps/web/tsconfig.json:",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_3",
        "instruction": "Add helper module apps/web/lib/eslint/route-boundaries.mjs that exports routeBoundaryZones for import/no-restricted-paths.",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_4",
        "instruction": "Update apps/web/eslint.config.mjs:",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_5",
        "instruction": "Move shared types from apps/web/types into apps/web/lib/types. Update imports.",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_6",
        "instruction": "Remove apps/web/types if empty.",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_7",
        "instruction": "Fix any lint or typecheck errors caused by these changes.",
        "files": [],
        "artifact": ""
      }
    ],
    "validation": {
      "commands": [
        "- npm --prefix apps/web run typecheck",
        "- npm --prefix apps/web run lint if available"
      ]
    },
    "expected_output": [
      "Lint enforces component paradigm import boundaries.",
      "Lint enforces route boundaries via generated zones.",
      "Shared types live under apps/web/lib/types.",
      "apps/web/types removed.",
      "Typecheck passes."
    ],
    "stop_conditions": [
      "New lint rules require large refactors beyond local fixes.",
      "Typecheck fails and root cause is unclear."
    ],
    "notes": []
  }
}
