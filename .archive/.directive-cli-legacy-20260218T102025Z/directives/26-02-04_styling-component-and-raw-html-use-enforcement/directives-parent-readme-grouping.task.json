{
  "kind": "directive_task",
  "schema_version": "1.0",
  "meta": {
    "title": "directives parent readme grouping fix",
    "status": "archived",
    "priority": "medium",
    "owner": "operator",
    "assignee": null,
    "created": "2026-02-10T21:41:36.000Z",
    "updated": "2026-02-11T10:29:39.000Z",
    "summary": "Fix directives UI grouping so session metadata does not fall back to unknown when parent README entries are filtered out.",
    "execution_model": "gpt-5.2-codex",
    "thinking_level": "medium",
    "tags": [
      "directives",
      "ui",
      "cleanup"
    ],
    "effort": "small",
    "session_priority": "high",
    "bucket": "archived",
    "depends_on": [],
    "blocked_by": [],
    "related": [],
    "result": "archived without execution per operator request to close all directives.",
    "id": "72e1b328-e5a5-4a16-b87a-ad1d09eec7b1"
  },
  "task": {
    "objective": "Fix the directives UI so each session card always resolves parent README metadata correctly and does not render `unknown` values when task files pass filters but parent files do not.",
    "constraints": [
      "Keep the change scoped to directives listing and grouping behavior.",
      "Do not change directive file storage format.",
      "Preserve current default filtering behavior for archived items unless explicitly updated in task logic.",
      "No em dash characters in generated writing."
    ],
    "allowed_files": [
      {
        "path": "Read: `apps/web/app/directives/**/*`",
        "access": "edit"
      },
      {
        "path": "Read: `apps/web/lib/types/directives/*`",
        "access": "edit"
      },
      {
        "path": "Write: `apps/web/app/directives/composites/DirectivesView.tsx`",
        "access": "edit"
      },
      {
        "path": "Write: `apps/web/app/directives/lib/directives-store.ts` only if strictly required",
        "access": "edit"
      }
    ],
    "steps": [
      {
        "id": "step_1",
        "instruction": "Reproduce the issue by applying a status filter that includes task statuses but excludes session parent status, then confirm session cards show `unknown` fallback values.",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_2",
        "instruction": "Update `DirectivesView` grouping logic so session parent entries are resolved from the full unfiltered dataset, while task rows continue to honor active filters.",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_3",
        "instruction": "Ensure each rendered session has stable values for title, status, directive id, and updated timestamp when a parent README exists on disk.",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_4",
        "instruction": "Keep fallback values only for truly malformed sessions where the parent README is missing or unreadable.",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_5",
        "instruction": "Re-test with filters and verify `unknown` is no longer shown for valid sessions with existing parent README files.",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_6",
        "instruction": "Add a short implementation note in task result metadata describing the grouping strategy.",
        "files": [],
        "artifact": ""
      }
    ],
    "validation": {
      "commands": [
        "- `npm --prefix apps/web run typecheck`",
        "- `npm --prefix apps/web run lint`"
      ]
    },
    "expected_output": [
      "Directives UI no longer shows `unknown` for status, directive id, or updated values when parent README files exist.",
      "Filter behavior remains intact for task visibility.",
      "Typecheck and lint pass."
    ],
    "stop_conditions": [
      "Stop if fixing grouping requires redesigning the directives data model.",
      "Stop if this exposes broader inconsistencies in directive file parsing that are outside this task scope."
    ],
    "notes": []
  }
}
