{
  "kind": "directive_task",
  "schema_version": "1.0",
  "meta": {
    "title": "directives tags input",
    "status": "archived",
    "owner": "architect",
    "assignee": "executor",
    "priority": "medium",
    "session_priority": "medium",
    "bucket": "archived",
    "auto_run": false,
    "tags": [
      "directives",
      "tags",
      "ui"
    ],
    "created": "2026-02-04T08:55:47.000Z",
    "updated": "2026-02-11T10:29:39.000Z",
    "summary": "Add a tags input for session creation that supports chips, enter to add, fuzzy suggestions from existing tags, and hyphenated normalization.",
    "execution_model": "gpt-5.2-codex",
    "thinking_level": "medium",
    "result": "Added a tags input with chip UI, normalization, and fuzzy suggestions, and persisted tags on session creation.",
    "id": "391ce64b-92c8-4f0b-b83e-3dc2611cc7ea"
  },
  "task": {
    "objective": "- Add a tags input to the create todo session form.\n- Support chip creation on Enter with remove controls.\n- Normalize tags by replacing spaces with hyphens and preventing duplicates.\n- Provide autocomplete suggestions using fuzzy matching against existing tags.",
    "constraints": [
      "Scope: apps/web only.",
      "No em dash characters in generated writing.",
      "Do not add new dependencies for fuzzy matching.",
      "Autocomplete suggestions must not be accepted automatically. A tag is added only when the user presses Enter.",
      "Use existing tags from local directives as the suggestion source.",
      "Do not call Supabase REST endpoints directly from UI code."
    ],
    "allowed_files": [
      {
        "path": "apps/web/app/directives/composites/DirectivesView.tsx",
        "access": "edit"
      },
      {
        "path": "apps/web/app/directives/composites/TagsMultiSelect.tsx",
        "access": "edit"
      },
      {
        "path": "apps/web/app/directives/composites/TaskListInput.tsx",
        "access": "edit"
      },
      {
        "path": "apps/web/app/directives/actions.ts",
        "access": "edit"
      },
      {
        "path": "apps/web/app/directives/lib/directives-store.ts",
        "access": "edit"
      },
      {
        "path": "apps/web/lib/types/directives/task.d.ts",
        "access": "edit"
      },
      {
        "path": "apps/web/app/directives/composites/DirectivesView.tsx",
        "access": "edit"
      },
      {
        "path": "apps/web/app/directives/actions.ts",
        "access": "edit"
      },
      {
        "path": "apps/web/app/directives/lib/directives-store.ts",
        "access": "edit"
      },
      {
        "path": "apps/web/app/directives/composites/TagsInput.tsx (new)",
        "access": "edit"
      }
    ],
    "steps": [
      {
        "id": "step_1",
        "instruction": "Create `apps/web/app/directives/composites/TagsInput.tsx` as a client component.",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_2",
        "instruction": "Implement TagsInput to:",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_3",
        "instruction": "Add a simple fuzzy matcher in TagsInput with no new dependencies:",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_4",
        "instruction": "Update `apps/web/app/directives/composites/DirectivesView.tsx`:",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_5",
        "instruction": "Update `apps/web/app/directives/actions.ts`:",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_6",
        "instruction": "Update `apps/web/app/directives/lib/directives-store.ts`:",
        "files": [],
        "artifact": ""
      },
      {
        "id": "step_7",
        "instruction": "Verify the form creates sessions with tags and the tags appear in filters.",
        "files": [],
        "artifact": ""
      }
    ],
    "validation": {
      "commands": [
        "- npm --prefix apps/web run typecheck",
        "- npm --prefix apps/web run lint"
      ]
    },
    "expected_output": [
      "Create todo form includes a tags input with chips.",
      "Enter commits tags, X removes them, and spaces are replaced with hyphens.",
      "Suggestions appear with fuzzy matching and do not auto commit.",
      "Tags are persisted to session README meta."
    ],
    "stop_conditions": [
      "Required inputs or files do not exist.",
      "Implementing fuzzy matching requires new dependencies.",
      "Component changes would violate the component paradigm."
    ],
    "notes": []
  }
}
